var dataSDK=function(){function e(e,t){for(var n={},i=0;i<t.length;i++){var r=new RegExp("(^|&)"+t[i]+"=([^&]*)(&|$)"),o=e.match(r),a="";null!=o&&(a=decodeURIComponent(o[2])),n[t[i]]=a}return n}function t(e){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.src=e;try{var n=document.getElementsByTagName("script").fiboDataSDK;n.parentNode.insertBefore(t,n)}catch(e){console.log("引用斐波SDK的script标签id必须为fiboDataSDK")}}function n(e,n,i,r){var s=T;s=o(s,"appId",i||M.pfid),s=o(s,"pageId",r||M.appid),"true"===M.debug&&(s=o(s,"debug","true")),s=o(s,"sui",O.sui),s=o(s,"cnl",O.cnl);var c={eventType:e,eventTime:(new Date).getTime()};a(n)&&(c.eventArgs=n),I.push(c),s=o(s,"rpEventList",JSON.stringify(I)),s=o(s,"referrer",encodeURIComponent(document.referrer));var l=k.get("rp");null==l&&(l=""),s=o(s,"rp",l);var d=k.get("ext");if(null==d&&(d=""),s=o(s,"ext",d),s=o(s,"url",encodeURIComponent(location.href)),"unload"===e||"exit"===e){var g=new Image;return g.src=s,void(I=[])}s=o(s,"callback","dataSDK.logCb"),t(s),I=[]}function i(e){var t="",n="",i=O.qz_gdt,r=O.gdt_vid;if(i?(t="qz_gdt",n=i):r&&(t="gdt_vid",n=r),n&&("linkclick"===e||"formInfo"===e)){var a=gdtUrl;a=o(a,"url",encodeURIComponent(location.href)),a=o(a,"eventtype",e),a=o(a,"click_type",t),a=o(a,"click_id",n);var s=new Image;s.src=a}}function r(){var e=E,n=k.get("rp");null==n&&(n=""),e=o(e,"rp",n);var i=k.get("ext");null==i&&(i=""),e=o(e,"callback","dataSDK.checkIdCb"),t(e)}function o(e,t,n){return void 0!=n&&null!=n||(n=""),e.indexOf("?")!=-1||e.indexOf("=")!=-1?e+"&"+t+"="+n:e+"?"+t+"="+n}function a(e){return null!==e&&"object"==typeof e&&(!Object.keys||0!==Object.keys(e).length)}function s(){var e,t=8,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[],r=n.length;for(e=0;e<t;e++)i[e]=n[0|Math.random()*r];return i.join("")}function c(e){a(e)&&n("userinfo",e)}function l(e,t){return void 0===t&&(t="1"),e.data?(i("formInfo"),void n("formInfo",{formInfo:e})):void(a(e)&&(i("formInfo"),n("formInfo",{formInfo:{data:e,version:t}})))}function d(e){if(a(e)){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;e.idno&&t.test(e.idno)&&(e.idno=""),e.gender&&/^(0|1|2)$/.test(e.gender)&&(e.gender="0"),n("idInfo",{name:e.name,phone:e.phone,addr:e.addr,idno:e.idno,gender:e.gender})}}function g(e){var t=/^[1][34578]\d{9}$/;if("string"==typeof e||t.test(e)){var i={phone:e};n("setphone",i)}}function p(e){var t=e||location.href;try{var n="";if(t.indexOf("#")!=-1){var i=t.split("#");n=i[1],t=i[0]}var r=encodeURIComponent(O.lc),a="",c=encodeURIComponent(O.cnl);return r=""===r?1:parseInt(r,10)+1,(isNaN(r)||0===r)&&(r=1),a=k.get("rp"),null===a&&(a=s(),k.add("rp",a,1e4)),t=t.indexOf("lc=")!=-1?t.replace(/lc=\d{1,5}/,"lc="+r):o(t,"lc",r),t=t.indexOf("sui=")!=-1?t.replace(/sui=[a-zA-Z0-9]{8}/,"sui="+a):o(t,"sui",a),t=t.indexOf("cnl=")!==-1?t.replace(/cnl=[^&]+/,"cnl="+c):o(t,"cnl",c),""!=n&&(t+="#"+n),t}catch(t){return e}}function u(e){var t=(new Date).getTime()-R,i={staytm:t,useragent:N.device,title:document.title};/^(timeline|friend|qq|txweibo|qzone)$/.test(e)&&(i.shareType=e),n("share",i)}function f(e,t,i){if(!(isNaN(e)||isNaN(t)||isNaN(i)||e<=0||t<=0||i<=0||e>i||t>i||e==t)){var r=(new Date).getTime(),o=r-R;if(R=r,!(o<0)){var a={ctp:e,tgp:t,ttp:i,staytm:o};n("switchpage",a)}}}function m(e){var t={};void 0===e||isNaN(e)||e<0||(t={currentPage:e}),n("exit",t)}function v(e,t){e&&t||console.log("btname and remark can not be empty"),e=e.toString(),t=t.toString();var r=e.replace(/[#&]/g,"_"),o=t.replace(/[#&]/g,"_");i("linkclick"),n("linkclick",{btname:r,remark:o});try{var a=event||window.event,s=a.target||a.srcElement;if(s&&"A"===s.tagName&&/^http/.test(s.href)){var c=s.href;a.preventDefault?a.preventDefault():a.returnValue=!1,setTimeout(function(){location.href=c},200)}}catch(e){console.log(e)}}function h(e){if(200===e.retCode){var t=e.rp,n=e.ext;""!==t&&"null"!==t&&k.add("rp",t,1e4),""!==n&&"null"!==n&&k.add("ext",n,1e4)}}function w(e){if(200===e.retCode){var t=e.rp,i=e.ext;if(""!==t&&"null"!==t&&k.add("rp",t,1e4),"true"!==M.blext)return void n("view",P);if(""===i||"null"===i||"undefined"===i||void 0===i){var r="https://col.fibodata.com/weixin/callback?surl="+encodeURIComponent(window.location.href),o=encodeURIComponent(r);return void(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx94ec6057d5a4a719&redirect_uri="+o+"&response_type=code&scope=snsapi_base&state=#wechat_redirect")}k.add("ext",i,1e4),n("view",P)}}function x(e){if("[object Array]"===toString.call(e)){var t=encodeURIComponent(e.toString());n("tag",{tags:t})}}function b(){var e={isWeixin:N.isWeixin,useragent:N.device,lc:parseInt(O.lc,10)||0,shareType:O.from,netType:N.netType,appSrc:N.appSrc,screen:U,model:N.model,mdetail:N.mdetail,title:document.title};"groupmessage"!==e.shareType&&"singlemessage"!==e.shareType&&"timeline"!==e.shareType&&(e.shareType="");var t="true"===M.auth;N.isWeixin&&t&&""===e.shareType&&(e.shareType="gzh");var n=document.referrer;return n.indexOf("mp.weixin.qq.com")==-1&&n.indexOf("mp.weixinbridge.com")==-1||(e.shareType="gzh"),e}function S(e,t){var i=b();n("view",i,e,t);try{var r=event||window.event,o=r.target||r.srcElement;if(o&&"A"===o.tagName&&/^http/.test(o.href)){var a=o.href;r.preventDefault?r.preventDefault():r.returnValue=!1,setTimeout(function(){location.href=a},200)}}catch(e){console.log(e)}}var I=[],R=0,y=(new Date).getTime(),T="https://col.fibodata.com/logdataservlet",E="https://col.fibodata.com/tolog/gaindata";gdtUrl="https://sdkapi.fibodata.com/tsa/userActions/add";var k={get:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)")),n=window.localStorage||!1;if(null!=t&&(t=t[2],n))try{window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null===t&&n&&(t=window.localStorage.getItem(e),null!=t&&k.add(e,t,1e4)),t?decodeURIComponent(t):null},add:function(e,t,n){var i=e+"="+encodeURIComponent(t)+";";if(0!=n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i+="expires="+r.toGMTString()}i+=";path=/",document.cookie=i;try{window.localStorage&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}}},O=function(){var t=window.location.search.substr(1),n=["lc","sui","cnl","debug","from","qz_gdt","gdt_vid"],i=e(t,n);return i}(),M=function(){var t=document.getElementById("fiboDataSDK").src.split("?")[1],n=["pfid","appid","blext","debug","auth"];return e(t,n)}(),$=window.screen.width||0,C=window.screen.height||0,D=window.devicePixelRatio||0,N=function(e){var t=e||window&&window.navigator&&window.navigator.userAgent,n={};if(!t)return n;var i=t.split(/[ ]\(|\)[ ]/),r=function(e){var n="pc",i="";if(/iPhone/i.test(t))n="iphone",/iPhone OS ([^ ;]*)/.test(t)&&(i=RegExp.$1.replace(/_/g,"."));else if(/(iPad|iPod)/i.test(t))n="ipad",/iPhone OS ([^ ;]*)/.test(t)&&(i=RegExp.$1.replace(/_/g,"."));else if(/Android/i.test(t))n="android",/Android ([^ ;]*)/.test(t)&&(i=RegExp.$1);else if(/Windows Phone/i.test(t))n="WP";else if(/Windows/i.test(t)){if(n="Windows",/Windows NT (\d+\.*\d*)/.test(t))switch(RegExp.$1){case"10.0":i="10";break;case"10":i="10";break;case"6.4":i="10技术预览版";break;case"6.3":i="8.1";break;case"6.2":i="8";break;case"6.1":i="7";break;case"6.0":i="vista";break;case"5.2":i="xp";break;case"5.1":i="xp"}}else/Mac OS X/.test(t)?(n="Mac",/Mac OS X ([^ ;]*)/.test(t)&&(i=RegExp.$1.replace(/_/g,"."))):(/X11/.test(t)||/Linux/.test(t))&&(n="Linux");var r="",o="",a="";if("android"===n){r=function(e){return/GT-|SM-|SCH-/gi.test(e)?"samsung":/HM|RedMi|Mi|MIX/gi.test(e)?"xiaomi":/HUAWEI|HONOR/gi.test(e)?"Huawei":/vivo/gi.test(e)?"vivo":/Meitu|MP/gi.test(e)?"Meitu":/OPPO|R6|R7|R8/gi.test(e)?"OPPO":/Coolpad|SK1/gi.test(e)?"Coolpad":/ASUS/gi.test(e)?"ASUS":/ZTE/gi.test(e)?"ZTE":/HTC/gi.test(e)?"HTC":/Sony/gi.test(e)?"Sony":/Lenovo/gi.test(e)?"Lenovo":/NX5/gi.test(e)?"nubia":/SM|YQ/gi.test(e)?"Smartisan":/m([0-9cx]{1,4})/gi.test(e)||/PRO 5/g.test(e)?"meizu":"UNKOWN"}(e);var s,c,l=e&&e.search("Build");-1!==l&&(s=e&&e.substr(0,l).split(";"),c=e&&e.substr(l).split(";")),s&&(o=s[s.length-1]," "===o[0]&&(o=o.substr(1))),c&&(a=c[0].split("/")[1])}else"iphone"===n?(r="iphoneOther",320===$&&(480===C&&(r=2===D?"iphone4x":"iphoneOther"),568===C&&(r="iphone5x")),375===$&&(667===C?r="iphone6x":812===C&&(r="iphoneX")),414===$&&(r="iphone6xp")):"pc"!==n&&"Windows"!==n&&"Mac"!==n&&"Linux"!==n||(/se\s(2\.x)/gi.test(t)?(r="sougou",o=RegExp.$1):/LBBROWSER/gi.test(t)?r="liebao":/qqbrowser\/([^\s;]*)/gi.test(t)?(r="qq",o=RegExp.$1):/UBrowser\/([^\s;]*)/gi.test(t)?(r="uc",o=RegExp.$1):/Maxthon\/([^\s;]*)/gi.test(t)?(r="maxthon",o=RegExp.$1):/360se/gi.test(t)?r="360se":/360ee/gi.test(t)?r="360ee":/BIDUBrowser|BaiduHD\s([^\s;]*)/gi.test(t)?(r="baidu",o=RegExp.$1):/TaoBrowser\/([^\s;]*)/gi.test(t)?(r="taobao",o=RegExp.$1):/Firefox\/([^\s;]*)/gi.test(t)?(r="firefox",o=RegExp.$1):/Opera|opr\/([^\s;]*)/gi.test(t)?(r="firefox",o=RegExp.$1):/msie\s([^\s;]*)/gi.test(t)?(r="ie",o=RegExp.$1):/Trident/gi.test(t)?(r="ie",/rv:([^\s;]*)/gi.test(t)&&(o=RegExp.$1)):/edge\/([^\s;])/gi.test(t)?(r="edge",o=RegExp.$1):/chrome\/([^\s;]*)/gi.test(t)?(r="chrome",o=RegExp.$1):/safari\/([^\s;]*)/gi.test(t)&&(r="safari",o=RegExp.$1));return{device:n,deviceVersion:i,model:r,mdetail:o.trim(),build:a}}(i[1]),o=function(e){var t="",n="",i=function(){for(var e="",t=["MicroMessenger","Weibo","Qzone","QQ","NewsArticle"],n=t.length,i=0;i<n;i++)e+=0===i?t[i]:"|"+t[i];return e&&(e="\\b("+e+")/[^ ]*"),new RegExp(e)}(),r="";if(r=e.match(i)){var o=r[0].split("/");t=o[0],n=o[1]}return{appSrc:t,appVersion:n}}(t),a="";if("MicroMessenger"===o.appSrc||"QQ"===o.appSrc||"Qzone"===o.appSrc){var s=t.match(/NetType\/[a-z0-9A-Z_]+/);null!==s&&(a=s[0].split("/")[1])}return{isWeixin:"MicroMessenger"===o.appSrc,appSrc:"MicroMessenger"===o.appSrc?"Weixin":o.appSrc,netType:a,device:r.device,model:r.model,mdetail:r.mdetail}}(),U=Math.max($,C)*D<=2560?(window.screen.width||0)*(window.devicePixelRatio||0)+"x"+(window.screen.height||0)*(window.devicePixelRatio||0):(window.screen.width||0)+"x"+(window.screen.height||0);sessionStorage?""!==O.lc||""!==O.cnl||""!==O.sui?(sessionStorage.setItem("lc",O.lc),sessionStorage.setItem("sui",O.sui),sessionStorage.setItem("cnl",O.cnl),sessionStorage.setItem("from",O.from)):(O.lc=sessionStorage.getItem("lc")||"",O.sui=sessionStorage.getItem("sui")||"",O.cnl=sessionStorage.getItem("cnl")||"",O.from=sessionStorage.getItem("from")||""):""!==O.lc||""!==O.cnl?(k.add("lc",O.lc),k.add("sui",O.sui),k.add("cnl",O.cnl),k.add("from",O.from)):(O.lc=k.get("lc")||"",O.sui=k.get("sui")||"",O.cnl=k.get("cnl")||"",O.from=k.get("from")||""),"null"===O.lc&&(O.lc=""),"null"===O.cnl&&(O.cnl=""),"null"===O.sui&&(O.sui=""),O.cnl.length>20&&(O.cnl=O.cnl.substr(0,20));var P=b();return R=(new Date).getTime(),N.isWeixin&&"true"===M.blext?r():n("view",P),window.addEventListener&&window.addEventListener("unload",function(){n("unload",{staytm:(new Date).getTime()-y})},!1),{pushUserInfo:c,saveFormInfo:l,dealUrl:p,preShareUrl:p,share:u,switchPage:f,exitPage:m,btnClick:v,saveCellPhone:g,pushTags:x,logCb:h,checkIdCb:w,pushIdentity:d,pushView:S}}();